# DataScope Vercel App Configuration
#
# This app uses three external services:
# 1. Anthropic API - Direct access for LLM calls
# 2. MCP Server - Single gateway for all data tools (Databricks, GitHub)
# 3. Galileo AI - Observability and evaluation for agent performance
#
# Authentication:
# - SP OAuth for app-to-app authentication (Vercel â†’ MCP)
# - User OAuth for per-user data access (Unity Catalog permissions)

# =============================================================================
# Anthropic API (Direct Access)
# =============================================================================
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-...

# =============================================================================
# MCP Server (Single Gateway for All Tools)
# =============================================================================
# URL of the custom MCP server deployed on Databricks Apps
MCP_SERVER_URL=https://datascope-mcp.your-workspace.databricks.app

# =============================================================================
# Databricks OAuth (REQUIRED for production)
# =============================================================================
# Databricks workspace URL
DATABRICKS_HOST=https://your-workspace.cloud.databricks.com

# Service Principal credentials for app-to-app authentication
# Create an SP in Databricks with OAuth secret:
#   databricks service-principals create --json '{"displayName": "datascope-vercel-app"}'
#   databricks service-principal-secrets-proxy create <SP_ID>
DATABRICKS_SP_CLIENT_ID=your-sp-application-id
DATABRICKS_SP_CLIENT_SECRET=your-sp-oauth-secret

# Optional: Separate OAuth app for user login (defaults to SP if not set)
# DATABRICKS_OAUTH_CLIENT_ID=your-user-oauth-client-id

# =============================================================================
# Legacy: Static Token (dev/testing only)
# =============================================================================
# Only used if OAuth credentials are not set (backwards compatibility)
# MCP_AUTH_TOKEN=your-mcp-auth-token

# =============================================================================
# Galileo AI - Observability and Evaluation (Optional but Recommended)
# =============================================================================
# Get your API key from: https://console.galileo.ai/
# When enabled, all LLM calls and tool executions are traced for debugging
GALILEO_API_KEY=your-galileo-api-key
GALILEO_PROJECT=datascope-vercel
GALILEO_LOG_STREAM=investigations

# =============================================================================
# Notes:
# - All Databricks data access secrets stay in the MCP server
# - User permissions are enforced by Unity Catalog via user OAuth token
# - SP OAuth tokens expire after 1 hour (auto-refreshed by the app)
# - User tokens also expire after 1 hour (user must re-login)
# =============================================================================
